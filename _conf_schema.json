{
    "draw": {
        "description": "文生图配置",
        "hint": "",
        "type": "object",
        "items": {
            "base_url": {
                "description": "文生图 API Base URL",
                "hint": "Gitee AI API 地址",
                "type": "string",
                "default": "https://ai.gitee.com/v1"
            },
            "api_keys": {
                "description": "API 密钥",
                "type": "list",
                "hint": "Gitee AI API Key，支持配置多个 Key 以实现轮询调用",
                "default": [],
                "obvious_hint": true
            },
            "model": {
                "description": "使用的模型名称",
                "hint": "例如: z-image-turbo",
                "type": "string",
                "default": "z-image-turbo"
            },
            "size": {
                "description": "默认生成图片的大小",
                "hint": "宽x高, 例如: 1024x1024",
                "type": "string",
                "options": [
                    "256x256",
                    "512x512",
                    "1024x1024",
                    "2048x2048",
                    "1152x896",
                    "2048x1536",
                    "768x1024",
                    "1536x2048",
                    "2048x1360",
                    "1360x2048",
                    "1024x576",
                    "2048x1152",
                    "576x1024",
                    "1152x2048"
                ],
                "default": "1024x1024"
            },
            "negative_prompt": {
                "description": "负面提示词",
                "hint": "用于指定不希望出现在生成图片中的内容",
                "type": "text",
                "default": ""
            },
            "num_inference_steps": {
                "description": "推理步数",
                "hint": "推理步数，默认 9",
                "type": "int",
                "slider": {
                    "min": 1,
                    "max": 20,
                    "step": 1
                },
                "default": 9
            },
            "timeout": {
                "description": "API 请求超时时间",
                "hint": "API 请求超时时间，单位秒",
                "type": "int",
                "slider": {
                    "min": 60,
                    "max": 600,
                    "step": 10
                },
                "default": 300
            },
            "max_retries": {
                "description": "最大重试次数",
                "hint": "如果 API 调用失败，将尝试重试此次数",
                "type": "int",
                "slider": {
                    "min": 0,
                    "max": 5,
                    "step": 1
                },
                "default": 2
            }
        }
    },
    "edit": {
        "description": "图生图配置",
        "hint": "",
        "type": "object",
        "items": {
            "default_backend": {
                "description": "默认改图后端",
                "hint": "gemini=Gemini原生API(支持4K), gitee=Gitee千问模型",
                "type": "string",
                "options": ["gemini", "gitee"],
                "default": "gemini"
            },
            "fallback": {
                "description": "降级配置",
                "hint": "",
                "type": "object",
                "items": {
                    "enabled": {
                        "description": "启用自动降级",
                        "hint": "主后端失败后自动切换到备用后端",
                        "type": "bool",
                        "default": true
                    },
                    "max_retries": {
                        "description": "主后端最大重试次数",
                        "hint": "重试N次全部失败后才降级到备用后端",
                        "type": "int",
                        "slider": {
                            "min": 0,
                            "max": 5,
                            "step": 1
                        },
                        "default": 2
                    },
                    "retry_delay": {
                        "description": "重试间隔(秒)",
                        "hint": "使用指数退避：第1次等待N秒，第2次等待2N秒...",
                        "type": "int",
                        "slider": {
                            "min": 1,
                            "max": 10,
                            "step": 1
                        },
                        "default": 2
                    }
                }
            },
            "gitee": {
                "description": "Gitee 千问后端配置",
                "hint": "",
                "type": "object",
                "items": {
                    "base_url": {
                        "description": "API Base URL",
                        "hint": "Gitee AI API 地址",
                        "type": "string",
                        "default": "https://ai.gitee.com/v1"
                    },
                    "api_keys": {
                        "description": "API 密钥",
                        "type": "list",
                        "hint": "留空则使用文生图的 api_keys",
                        "default": []
                    },
                    "model": {
                        "description": "模型名称",
                        "type": "string",
                        "default": "Qwen-Image-Edit-2511",
                        "hint": "例如: Qwen-Image-Edit-2511"
                    },
                    "num_inference_steps": {
                        "description": "推理步数",
                        "hint": "图生图推理步数，默认 4",
                        "type": "int",
                        "slider": {
                            "min": 1,
                            "max": 20,
                            "step": 1
                        },
                        "default": 4
                    },
                    "guidance_scale": {
                        "description": "引导系数",
                        "hint": "控制生成图片与提示词的一致性，默认 1.0",
                        "type": "float",
                        "slider": {
                            "min": 1,
                            "max": 5,
                            "step": 0.1
                        },
                        "default": 1.0
                    },
                    "poll_interval": {
                        "description": "轮询间隔(秒)",
                        "hint": "轮询任务状态的间隔时间，默认 5 秒",
                        "type": "int",
                        "slider": {
                            "min": 1,
                            "max": 20,
                            "step": 1
                        },
                        "default": 5
                    },
                    "poll_timeout": {
                        "description": "轮询超时(秒)",
                        "hint": "轮询超时时间，默认 300 秒(5分钟)",
                        "type": "int",
                        "slider": {
                            "min": 60,
                            "max": 600,
                            "step": 10
                        },
                        "default": 300
                    }
                }
            },
            "gemini": {
                "description": "Gemini 后端配置",
                "hint": "",
                "type": "object",
                "items": {
                    "api_url": {
                        "description": "API Base URL",
                        "hint": "Gemini 官方或代理地址",
                        "type": "string",
                        "default": "https://generativelanguage.googleapis.com"
                    },
                    "api_keys": {
                        "description": "API 密钥池",
                        "type": "list",
                        "hint": "支持多 Key 轮询，至少配置一个",
                        "default": [],
                        "obvious_hint": true
                    },
                    "model": {
                        "description": "模型名称",
                        "type": "string",
                        "default": "gemini-2.0-flash-preview-image-generation",
                        "hint": "支持图片生成的 Gemini 模型"
                    },
                    "resolution": {
                        "description": "输出分辨率",
                        "hint": "4K 可获得最高质量输出",
                        "type": "string",
                        "options": ["1K", "2K", "4K"],
                        "default": "4K"
                    },
                    "use_proxy": {
                        "description": "启用代理",
                        "hint": "是否使用代理访问 Gemini API",
                        "type": "bool",
                        "default": false
                    },
                    "proxy_url": {
                        "description": "代理地址",
                        "hint": "格式: http://127.0.0.1:7890",
                        "type": "string",
                        "default": ""
                    },
                    "timeout": {
                        "description": "请求超时(秒)",
                        "hint": "API 请求超时时间",
                        "type": "int",
                        "slider": {
                            "min": 60,
                            "max": 300,
                            "step": 10
                        },
                        "default": 120
                    }
                }
            },
            "presets": {
                "description": "自定义预设提示词",
                "hint": "格式: 触发词:英文提示词。例如: 手办化:Transform into figurine style",
                "type": "list",
                "default": []
            }
        }
    },
    "video": {
        "description": "视频生成配置 (Grok imagine)",
        "hint": "",
        "type": "object",
        "items": {
            "enabled": {
                "description": "启用视频生成",
                "type": "bool",
                "default": true
            },
            "server_url": {
                "description": "Grok API 服务地址",
                "hint": "默认: https://api.x.ai（自动补全 /v1/chat/completions）",
                "type": "string",
                "default": "https://api.x.ai"
            },
            "api_key": {
                "description": "Grok API 密钥",
                "type": "string",
                "hint": "填写 x.ai / grok2api 的 API Key",
                "default": "",
                "obvious_hint": true
            },
            "model": {
                "description": "模型ID",
                "type": "string",
                "hint": "例如: grok-imagine-0.9",
                "default": "grok-imagine-0.9"
            },
            "timeout_seconds": {
                "description": "请求超时(秒)",
                "type": "int",
                "hint": "最大 3600 秒",
                "slider": {
                    "min": 1,
                    "max": 3600,
                    "step": 10
                },
                "default": 180
            },
            "max_retries": {
                "description": "最大重试次数",
                "hint": "失败后自动重试次数（0=不重试）",
                "type": "int",
                "slider": {
                    "min": 0,
                    "max": 5,
                    "step": 1
                },
                "default": 2
            },
            "empty_response_retry": {
                "description": "无视频URL重试次数",
                "hint": "当 API 返回 200 但未解析到视频URL 时的额外重试次数",
                "type": "int",
                "slider": {
                    "min": 0,
                    "max": 10,
                    "step": 1
                },
                "default": 2
            },
            "retry_delay": {
                "description": "重试基础间隔(秒)",
                "hint": "指数退避：retry_delay * 2^attempt",
                "type": "int",
                "slider": {
                    "min": 0,
                    "max": 30,
                    "step": 1
                },
                "default": 2
            },
            "send_mode": {
                "description": "发送方式",
                "hint": "auto=URL失败再下载；url=仅URL；file=下载后本地文件",
                "type": "string",
                "options": ["auto", "url", "file"],
                "default": "auto"
            },
            "send_timeout_seconds": {
                "description": "发送超时(秒)",
                "hint": "发送 Video 组件等待时间",
                "type": "int",
                "slider": {
                    "min": 10,
                    "max": 300,
                    "step": 10
                },
                "default": 90
            },
            "download_timeout_seconds": {
                "description": "下载视频超时(秒)",
                "hint": "send_mode=file/auto 时用于下载",
                "type": "int",
                "slider": {
                    "min": 30,
                    "max": 3600,
                    "step": 30
                },
                "default": 300
            },
            "max_cached_videos": {
                "description": "本地视频最大缓存数",
                "hint": "send_mode=file/auto 时用于防止盘满（0=不清理）",
                "type": "int",
                "slider": {
                    "min": 0,
                    "max": 200,
                    "step": 1
                },
                "default": 20
            },
            "presets": {
                "description": "自定义视频预设提示词",
                "hint": "格式: 预设名:英文提示词 例如: 日常:Daily outfit, cinematic, walking",
                "type": "list",
                "default": []
            }
        }
    },
    "max_cached_images": {
        "description": "图片最大缓存数",
        "hint": "超过此数时，将清理一半的旧缓存图",
        "type": "int",
        "slider": {
            "min": 10,
            "max": 100,
            "step": 1
        },
        "default": 50
    },
    "debounce_interval": {
        "description": "防抖时长（秒）",
        "hint": "防抖时间内无法重复提交生图请求，每个用户单独计时",
        "type": "int",
        "slider": {
            "min": 0,
            "max": 60,
            "step": 1
        },
        "default": 10
    }
}
